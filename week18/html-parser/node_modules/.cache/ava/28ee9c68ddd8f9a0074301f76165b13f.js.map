{"version":3,"sources":["test/parser.test.js"],"names":["t","doc","div","children","tagName","pass","length","type","attributes","text","content","e","message","count","attr","name","value"],"mappings":";;AAQA;;AACA;;;;;;;;;;AAEA,qBAAK,wBAAL,EAA+B,UAACA,CAAD,EAAO;AACpC,MAAIC,GAAG,GAAG,uBAAU,aAAV,CAAV;AACA,MAAIC,GAAG,GAAGD,GAAG,CAACE,QAAJ,CAAa,CAAb,CAAV;;AACA,MAAID,GAAG,CAACE,OAAJ,IAAe,KAAnB,EAA0B;AACxBJ,IAAAA,CAAC,CAACK,IAAF;AACD;;AAED,MAAIH,GAAG,CAACC,QAAJ,CAAaG,MAAb,KAAwB,CAA5B,EAA+B;AAC7BN,IAAAA,CAAC,CAACK,IAAF;AACD;;AAED,MAAIH,GAAG,CAACK,IAAJ,KAAa,SAAjB,EAA4B;AAC1BP,IAAAA,CAAC,CAACK,IAAF;AACD;;AAED,MAAIH,GAAG,CAACM,UAAJ,CAAeF,MAAf,KAA0B,CAA9B,EAAiC;AAC/BN,IAAAA,CAAC,CAACK,IAAF;AACD;AACF,CAlBD;AAoBA,qBAAK,0CAAL,EAAiD,UAACL,CAAD,EAAO;AACtD,MAAIC,GAAG,GAAG,uBAAU,kBAAV,CAAV;AACA,MAAIQ,IAAI,GAAGR,GAAG,CAACE,QAAJ,CAAa,CAAb,EAAgBA,QAAhB,CAAyB,CAAzB,CAAX;;AACA,MAAIM,IAAI,CAACC,OAAL,KAAiB,OAArB,EAA8B;AAC5BV,IAAAA,CAAC,CAACK,IAAF;AACD;;AACD,MAAII,IAAI,CAACF,IAAL,KAAc,MAAlB,EAA0B;AACxBP,IAAAA,CAAC,CAACK,IAAF;AACD;AACF,CATD;AAWA,qBAAK,cAAL,EAAqB,UAACL,CAAD,EAAO;AAC1B,MAAI;AACF,QAAMC,GAAG,GAAG,uBAAU,WAAV,CAAZ;AACD,GAFD,CAEE,OAAOU,CAAP,EAAU;AACV,QAAIA,CAAC,CAACC,OAAF,KAAc,8BAAlB,EAAkD;AAChDZ,MAAAA,CAAC,CAACK,IAAF;AACD;AACF;AACF,CARD;AAUA,qBAAK,aAAL,EAAoB,UAACL,CAAD,EAAO;AACzB,MAAMC,GAAG,GAAG,uBAAU,kBAAV,CAAZ;AACA,MAAIQ,IAAI,GAAGR,GAAG,CAACE,QAAJ,CAAa,CAAb,EAAgBA,QAAhB,CAAyB,CAAzB,CAAX;;AACA,MAAIM,IAAI,CAACC,OAAL,KAAiB,OAArB,EAA8B;AAC5BV,IAAAA,CAAC,CAACK,IAAF;AACD;;AACD,MAAII,IAAI,CAACF,IAAL,KAAc,MAAlB,EAA0B;AACxBP,IAAAA,CAAC,CAACK,IAAF;AACD;AACF,CATD;AAWA,qBAAK,eAAL,EAAsB,UAACL,CAAD,EAAO;AAC3B,MAAMC,GAAG,GAAG,uBAAU,4CAAV,CAAZ;AACA,MAAIC,GAAG,GAAGD,GAAG,CAACE,QAAJ,CAAa,CAAb,CAAV;AACA,MAAIU,KAAK,GAAG,CAAZ;;AAH2B,6CAIVX,GAAG,CAACM,UAJM;AAAA;;AAAA;AAI3B,wDAAiC;AAAA,UAAxBM,IAAwB;;AAC/B,UAAIA,IAAI,CAACC,IAAL,KAAc,IAAlB,EAAwB;AACtB,YAAID,IAAI,CAACE,KAAL,KAAe,GAAnB,EAAwB;AACtBH,UAAAA,KAAK;AACLb,UAAAA,CAAC,CAACK,IAAF;AACD;AACF;;AAED,UAAIS,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;AACzB,YAAID,IAAI,CAACE,KAAL,KAAe,KAAnB,EAA0B;AACxBH,UAAAA,KAAK;AACLb,UAAAA,CAAC,CAACK,IAAF;AACD;AACF;;AAED,UAAIS,IAAI,CAACC,IAAL,KAAc,MAAlB,EAA0B;AACxB,YAAID,IAAI,CAACE,KAAL,KAAe,KAAnB,EAA0B;AACxBH,UAAAA,KAAK;AACLb,UAAAA,CAAC,CAACK,IAAF;AACD;AACF;AACF;AAzB0B;AAAA;AAAA;AAAA;AAAA;AA0B5B,CA1BD;AA4BA,qBAAK,6BAAL,EAAoC,UAACL,CAAD,EAAO;AACzC,MAAIC,GAAG,GAAG,uBAAU,2CAAV,CAAV;AACA,MAAIC,GAAG,GAAGD,GAAG,CAACE,QAAJ,CAAa,CAAb,CAAV;AACA,MAAIU,KAAK,GAAG,CAAZ;;AAHyC,8CAIxBX,GAAG,CAACM,UAJoB;AAAA;;AAAA;AAIzC,2DAAiC;AAAA,UAAxBM,IAAwB;;AAC/B,UAAIA,IAAI,CAACC,IAAL,KAAc,IAAlB,EAAwB;AACtB,YAAID,IAAI,CAACE,KAAL,KAAe,GAAnB,EAAwB;AACtBH,UAAAA,KAAK;AACLb,UAAAA,CAAC,CAACK,IAAF;AACD;AACF;;AAED,UAAIS,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;AACzB,YAAID,IAAI,CAACE,KAAL,KAAe,KAAnB,EAA0B;AACxBH,UAAAA,KAAK;AACLb,UAAAA,CAAC,CAACK,IAAF;AACD;AACF;;AAED,UAAIS,IAAI,CAACC,IAAL,KAAc,MAAlB,EAA0B;AACxB,YAAID,IAAI,CAACE,KAAL,KAAe,KAAnB,EAA0B;AACxBH,UAAAA,KAAK;AACLb,UAAAA,CAAC,CAACK,IAAF;AACD;AACF;AACF;AAzBwC;AAAA;AAAA;AAAA;AAAA;AA0B1C,CA1BD;AA4BA,qBAAK,iBAAL,EAAwB,UAACL,CAAD,EAAO;AAC7B,MAAIC,GAAG,GAAG,mEAAV;AAEA,MAAIC,GAAG,GAAGD,GAAG,CAACE,QAAJ,CAAa,CAAb,CAAV;AACA,MAAIU,KAAK,GAAG,CAAZ;;AAJ6B,8CAKZX,GAAG,CAACM,UALQ;AAAA;;AAAA;AAK7B,2DAAiC;AAAA,UAAxBM,IAAwB;;AAC/B,UAAIA,IAAI,CAACC,IAAL,KAAc,IAAlB,EAAwB;AACtB,YAAID,IAAI,CAACE,KAAL,KAAe,GAAnB,EAAwB;AACtBH,UAAAA,KAAK;AACLb,UAAAA,CAAC,CAACK,IAAF;AACD;AACF;;AAED,UAAIS,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;AACzB,YAAID,IAAI,CAACE,KAAL,KAAe,KAAnB,EAA0B;AACxBH,UAAAA,KAAK;AACLb,UAAAA,CAAC,CAACK,IAAF;AACD;AACF;;AAED,UAAIS,IAAI,CAACC,IAAL,KAAc,MAAlB,EAA0B;AACxB,YAAID,IAAI,CAACE,KAAL,KAAe,KAAnB,EAA0B;AACxBH,UAAAA,KAAK;AACLb,UAAAA,CAAC,CAACK,IAAF;AACD;AACF;AACF;AA1B4B;AAAA;AAAA;AAAA;AAAA;AA2B9B,CA3BD;AA6BA,qBAAK,QAAL,EAAe,UAACL,CAAD,EAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAIC,GAAG,GAAG,2LAAV;AAeA,MAAIQ,IAAI,GAAGR,GAAG,CAACE,QAAJ,CAAa,CAAb,EAAgBA,QAAhB,CAAyB,CAAzB,CAAX;AACAH,EAAAA,CAAC,CAACK,IAAF,GA7BoB,CA8BpB;AACA;AACA;AACA;AACA;AACA;AACD,CApCD;AAsCA,qBAAK,yBAAL,EAAgC,UAACL,CAAD,EAAO;AACrC,MAAIC,GAAG,GAAG,uBAAU,cAAV,CAAV;AACAD,EAAAA,CAAC,CAACK,IAAF;AACD,CAHD;AAKA,qBAAK,2BAAL,EAAkC,UAACL,CAAD,EAAO;AACvC,MAAIC,GAAG,GAAG,uBAAU,iBAAV,CAAV;AACAD,EAAAA,CAAC,CAACK,IAAF;AACD,CAHD;AAKA,qBAAK,MAAL,EAAa,UAACL,CAAD,EAAO;AAClB,MAAIC,GAAG,GAAG,uBAAU,QAAV,CAAV;AACAD,EAAAA,CAAC,CAACK,IAAF;AACD,CAHD","sourceRoot":"/Users/caihuiting/Desktop/前端学习资料/Github/week18/html-parser","sourcesContent":["/*\n * @Descripttion:\n * @version:\n * @Author: tina.cai\n * @Date: 2020-08-16 23:41:27\n * @LastEditors: tina.cai\n * @LastEditTime: 2020-08-17 01:51:47\n */\nimport { parseHTML } from \"../src/parser.js\";\nimport test from \"ava\";\n\ntest(\"parse a single element\", (t) => {\n  let doc = parseHTML(\"<div></div>\");\n  let div = doc.children[0];\n  if (div.tagName == \"div\") {\n    t.pass();\n  }\n\n  if (div.children.length === 0) {\n    t.pass();\n  }\n\n  if (div.type === \"element\") {\n    t.pass();\n  }\n\n  if (div.attributes.length === 2) {\n    t.pass();\n  }\n});\n\ntest(\"parse a single element with text content\", (t) => {\n  let doc = parseHTML(\"<div>hello</div>\");\n  let text = doc.children[0].children[0];\n  if (text.content === \"hello\") {\n    t.pass();\n  }\n  if (text.type === \"text\") {\n    t.pass();\n  }\n});\n\ntest(\"tag mismatch\", (t) => {\n  try {\n    const doc = parseHTML(\"<div></p>\");\n  } catch (e) {\n    if (e.message === \"Tag start end doesn't match!\") {\n      t.pass();\n    }\n  }\n});\n\ntest(\"test with <\", (t) => {\n  const doc = parseHTML(\"<div>a < b</div>\");\n  let text = doc.children[0].children[0];\n  if (text.content === \"a < b\") {\n    t.pass();\n  }\n  if (text.type === \"text\") {\n    t.pass();\n  }\n});\n\ntest(\"with property\", (t) => {\n  const doc = parseHTML(\"<div id=a class='cls' data=\\\"abc\\\" ></div>\");\n  let div = doc.children[0];\n  let count = 0;\n  for (let attr of div.attributes) {\n    if (attr.name === \"id\") {\n      if (attr.value === \"a\") {\n        count++;\n        t.pass();\n      }\n    }\n\n    if (attr.name === \"class\") {\n      if (attr.value === \"cls\") {\n        count++;\n        t.pass();\n      }\n    }\n\n    if (attr.name === \"data\") {\n      if (attr.value === \"abc\") {\n        count++;\n        t.pass();\n      }\n    }\n  }\n});\n\ntest(\"with double quoted property\", (t) => {\n  let doc = parseHTML(\"<div id=a class='cls' data=\\\"abc\\\"></div>\");\n  let div = doc.children[0];\n  let count = 0;\n  for (let attr of div.attributes) {\n    if (attr.name === \"id\") {\n      if (attr.value === \"a\") {\n        count++;\n        t.pass();\n      }\n    }\n\n    if (attr.name === \"class\") {\n      if (attr.value === \"cls\") {\n        count++;\n        t.pass();\n      }\n    }\n\n    if (attr.name === \"data\") {\n      if (attr.value === \"abc\") {\n        count++;\n        t.pass();\n      }\n    }\n  }\n});\n\ntest(\"with self close\", (t) => {\n  let doc = parseHTML(`<div id=a class='cls'  data=\\\"abc\\\"\n  />`);\n  let div = doc.children[0];\n  let count = 0;\n  for (let attr of div.attributes) {\n    if (attr.name === \"id\") {\n      if (attr.value === \"a\") {\n        count++;\n        t.pass();\n      }\n    }\n\n    if (attr.name === \"class\") {\n      if (attr.value === \"cls\") {\n        count++;\n        t.pass();\n      }\n    }\n\n    if (attr.name === \"data\") {\n      if (attr.value === \"abc\") {\n        count++;\n        t.pass();\n      }\n    }\n  }\n});\n\ntest(\"script\", (t) => {\n  // let content = `\n  // <div>abcd</div>\n  // <span>x/span>\n  // /script>\n  // <script\n  // <\n  // </\n  // </sc\n  // </scr\n  // </scri\n  // </scrip\n  // </script`;\n  let doc = parseHTML(`<script>\n  <div>abcd</div>\n  <span>x/span>\n  /script>\n  <script\n  <\n  </\n  </s\n  </sc\n  </scr\n  </scri\n  </scrip\n  </script\n  </script \n  </script>`);\n  let text = doc.children[0].children[0];\n  t.pass();\n  // if (text.content === content) {\n  //   t.pass();\n  // }\n  // if (text.type === \"text\") {\n  //   t.pass();\n  // }\n});\n\ntest(\"attribute with no value\", (t) => {\n  let doc = parseHTML(\"<div class/>\");\n  t.pass();\n});\n\ntest(\"attribute with no value 2\", (t) => {\n  let doc = parseHTML(\"<div class id/>\");\n  t.pass();\n});\n\ntest(\"self\", (t) => {\n  let doc = parseHTML(\"<div/>\");\n  t.pass();\n});\n"]}